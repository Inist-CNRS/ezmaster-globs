#!/usr/bin/env bash
################################################################################
#
# GLoBS / install / globs.cron.sh
# 
# Tâche de récupération des dépôts git lancée par le cron.
# À installer dans le cron du user « globs »
#
# @author : INIST-CNRS/DPI
#
################################################################################

# ------------------------------------------------------------------------------
# Configuration
# ------------------------------------------------------------------------------
HOME_DEPOTS="/home/globs/git"
LISTE_DEPOTS=<<FIN

FIN

# ------------------------------------------------------------------------------
# Pull global de tous les dépots de la liste...
# ------------------------------------------------------------------------------
find "$HOME_DEPOTS" -maxdepth=1 -type d | parallel --gnu "cd {} && git pull"
for depot in $LISTE_DEPOTS

# ------------------------------------------------------------------------------
# Fin !
# ------------------------------------------------------------------------------
exit 0
